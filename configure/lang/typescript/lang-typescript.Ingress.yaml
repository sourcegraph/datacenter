apiVersion: extensions/v1beta1
kind: Ingress
metadata:
    name: lang-typescript
    labels:
        app: lang-typescript
        deploy: lang-typescript
    annotations:
        kubernetes.io/ingress.class: "nginx"

        # HTTP basic auth prevents unauthorized access to the language server.
        # See https://kubernetes.github.io/ingress-nginx/examples/auth/basic/ for more information.
        nginx.ingress.kubernetes.io/auth-type: basic
        nginx.ingress.kubernetes.io/auth-realm: 'Basic authentication is required to access the language server'

        # Name of the Kubernetes secret that contains the user/password definitions.
        # ðŸš¨ You must create the 'langserver-auth' secret with 'kubectl create secret generic langserver-auth ...'
        nginx.ingress.kubernetes.io/auth-secret: langserver-auth

        # See
        # https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/
        # for more nginx annotations.
spec:
    tls:
    - hosts:
      # ðŸš¨ TLS is required for secure communication with the language server. 
      # See the customization guide (../../../docs/configure.md) for information
      # about configuring TLS
      # 
      # Make sure to replace 'sourcegraph.example.com' with the real domain that you are
      # using for your Sourcegraph instance.
      - sourcegraph.example.com
      secretName: sourcegraph-tls
    rules:
    - host: sourcegraph.example.com
      http:
        paths:
        - path: /typescript
          backend:
            serviceName: lang-typescript
            servicePort: 8080 
